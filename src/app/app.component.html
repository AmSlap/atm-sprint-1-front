<div class="app-container" [class.sidebar-open]="sidebarOpen">
  <!-- Side Navigation -->
  <nav class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <div class="sidebar-brand">
        <span class="brand-icon">🏧</span>
        <span i18n class="brand-text" *ngIf="sidebarOpen">ATM Manager</span>
      </div>
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <span class="toggle-icon">{{ sidebarOpen ? '✖' : '☰' }}</span>
      </button>
    </div>

    <div class="sidebar-content">
      <div class="user-info" *ngIf="sidebarOpen">
        <div class="user-avatar">{{ getCurrentUser().charAt(0) }}</div>
        <div class="user-details">
          <div class="user-name">{{ getCurrentUser() }}</div>
          <div class="user-role" i18n>Administrator</div>
          <div class="user-time">{{ getCurrentDateTime() }}</div>
        </div>
      </div>

      <ul class="sidebar-menu">
        <!-- Dashboard -->
        <li class="menu-item" [class.active]="isRouteActive('/')">
          <a routerLink="/" class="menu-link" (click)="closeSidebarOnMobile()">
            <span class="menu-icon">📊</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">Dashboard</span>
          </a>
        </li>

        <!-- ATM Management Section -->
        <li class="menu-section" *ngIf="sidebarOpen">
          <span i18n class="section-title">ATM Management</span>
        </li>

        <li class="menu-item" [class.active]="isRouteActive('/admin/registry')">
          <a routerLink="/admin/registry" class="menu-link" (click)="closeSidebarOnMobile()">
            <span class="menu-icon">🏛️</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">ATM Registry</span>
          </a>
        </li>

        <li class="menu-item" [class.active]="isRouteActive('/agency-management')">
          <a routerLink="/agency-management" class="menu-link" (click)="closeSidebarOnMobile()">
            <span class="menu-icon">🏢</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">Agency Management</span>
          </a>
        </li>

        <!-- Configuration Section -->
        <li class="menu-section" *ngIf="sidebarOpen">
          <span i18n class="section-title">System</span>
        </li>

        <li class="menu-item">
          <a href="#" class="menu-link" (click)="showComingSoon('Settings')">
            <span class="menu-icon">⚙️</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">Settings</span>
          </a>
        </li>

        <li class="menu-item">
          <a href="#" class="menu-link" (click)="showComingSoon('Reports')">
            <span class="menu-icon">📈</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">Reports</span>
          </a>
        </li>

        <li class="menu-item">
          <a href="#" class="menu-link" (click)="showComingSoon('Monitoring')">
            <span class="menu-icon">📺</span>
            <span i18n class="menu-text" *ngIf="sidebarOpen">Monitoring</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="sidebar-footer" *ngIf="sidebarOpen">
      <div class="footer-info">
        <div i18n class="app-version">Version 1.0.0</div>
        <div class="current-time">{{ getCurrentTime() }}</div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content" [class.shifted]="sidebarOpen">
    <!-- Mobile Header -->
    <header class="mobile-header" *ngIf="!sidebarOpen">
      <button class="mobile-menu-btn" (click)="toggleSidebar()">
        <span class="menu-icon">☰</span>
      </button>
      <div class="mobile-title">
        <span class="mobile-brand-icon">🏧</span>
        <span class="mobile-brand-text">ATM Manager</span>
      </div>
      <div class="mobile-user">
        <span class="mobile-user-name">{{ getCurrentUser() }}</span>
      </div>
    </header>

    <!-- Router Outlet -->
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay"
       *ngIf="sidebarOpen && isMobile()"
       (click)="closeSidebar()">
  </div>

  <!-- Success/Error Messages -->
  <div class="message-container" *ngIf="showMessage">
    <div class="message" [ngClass]="messageType">
      <span class="message-icon">{{ getMessageIcon() }}</span>
      <span class="message-text">{{ messageText }}</span>
      <button class="message-close" (click)="closeMessage()">✖</button>
    </div>
  </div>
</div>
