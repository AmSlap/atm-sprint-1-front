<div class="counters-container">
  <h2>ATM Counters</h2>

  <div class="counters-card">
    <h3>Cash Summary</h3>
    <div class="info-item">
      <span class="label">Total Cash Available:</span>
      <span class="value">{{ counters.totalCashAvailable | currency }}</span>
    </div>
    <div class="info-item">
      <span class="label">Low Cash Status:</span>
      <span class="value" [class.warning]="counters.lowCashFlag">
        {{ counters.lowCashFlag ? 'Low Cash Warning!' : 'Cash Level Normal' }}
      </span>
    </div>
    <div class="info-item">
      <span class="label">Reject Bin:</span>
      <span class="value">
        {{ counters.rejectBinPercentageFull }}% Full
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="counters.rejectBinPercentageFull"
               [ngClass]="{'warning': counters.rejectBinPercentageFull > 70,
                          'critical': counters.rejectBinPercentageFull > 90}">
          </div>
        </div>
      </span>
    </div>
    <div class="info-item">
      <span class="label">Last Update:</span>
      <span class="value">{{ counters.lastUpdateTimestamp | date:'medium' }}</span>
    </div>
  </div>

  <div class="counters-card">
    <h3>Cassettes</h3>
    <div *ngIf="!counters.cassettes || counters.cassettes.length === 0" class="no-cassettes">
      No cassette information available
    </div>

    <div class="cassette-grid">
      <div *ngFor="let cassette of counters.cassettes" class="cassette-item">
        <div class="cassette-header">
          <h4>{{ cassette.cassetteId }}</h4>
          <div class="cassette-status" [style.background-color]="getCassetteStatusColor(cassette.cassetteStatus)"></div>
        </div>

        <div class="cassette-details">
          <div class="info-item">
            <span class="label">Denomination:</span>
            <span class="value">{{ cassette.denomination | currency:cassette.currency }}</span>
          </div>
          <div class="info-item">
            <span class="label">Notes Remaining:</span>
            <span class="value">{{ cassette.notesRemaining }}</span>
          </div>
          <div class="info-item">
            <span class="label">Status:</span>
            <span class="value">{{ cassette.cassetteStatus }}</span>
          </div>
          <div class="info-item">
            <span class="label">Fill Level:</span>
            <span class="value">
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="getNotesRemainingPercentage(cassette)"
                     [ngClass]="{'warning': getNotesRemainingPercentage(cassette) < 30,
                                'critical': getNotesRemainingPercentage(cassette) < 10}">
                </div>
              </div>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
